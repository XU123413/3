<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"/>
  <title>è¿ç¥æœ€ç¾çš„å°ç‹åŒå­¦ç”Ÿæ—¥å¿«ä¹</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }

    #subtitle {
      position: absolute;
      top: 5%;
      width: 100%;
      text-align: center;
      font-size: 2.5em;
      font-family: 'Segoe UI', sans-serif;
      color: #ffefc0;
      text-shadow: 0 0 15px rgba(255, 223, 150, 0.8), 0 0 30px rgba(255, 200, 100, 0.6);
      z-index: 20;
      animation: fadeInText 3s ease-in-out;
      font-weight: bold;
    }

    #countdown {
      position: absolute;
      top: 18%;
      width: 100%;
      text-align: center;
      font-size: 2.5em;
      font-family: 'Courier New', monospace;
      color: #fff8dc;
      z-index: 15;
      animation: pulse 2s ease-in-out infinite;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 8px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    #photo {
      position: absolute;
      top: 28%;
      left: 50%;
      transform: translateX(-50%);
      max-width: 50%; /* è®¾ç½®æœ€å¤§å®½åº¦ä¸º 50% */
      height: auto; /* ä¿æŒå®½é«˜æ¯” */
      border-radius: 12px;
      z-index: 10;
    }

    #triggerButton {
      position: fixed;
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 24px;
      font-size: 5vw;
      background: #ff9a00;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      z-index: 150;
      box-shadow: 0 0 10px rgba(255, 154, 0, 0.8);
    }

    #bigTitle {
      display: none;
      position: fixed;
      top: 30%;
      width: 100%;
      text-align: center;
      font-size: 6vw;
      color: #ffd700;
      text-shadow: 0 0 20px #ff0, 0 0 40px #f80;
      z-index: 102;
      animation: titleFadeIn 3s ease-in-out forwards;
    }

    #cake {
      display: none;
      position: fixed;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 6em;
      z-index: 101;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://cdn.jsdelivr.net/gh/VincentGarreau/particles.js@master/demo/media/starfield.png') repeat;
      background-size: cover;
      opacity: 0.3;
      z-index: 0;
    }

    /* ä¿¡å°æ ·å¼ */
    #envelopeButton {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5vw;
      cursor: pointer;
      z-index: 1000;
      display: none;
    }

    #envelopeContent {
      display: none;
      position: fixed;
      top: 60%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      z-index: 1001;
      font-size: 1.5em;
      font-family: 'Segoe UI', sans-serif;
    }
  </style>
</head>

<body>
  <!-- æ·»åŠ èƒŒæ™¯éŸ³ä¹ -->
  <audio id="backgroundMusic" loop autoplay>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <div id="subtitle">è¿ç¥æœ€ç¾çš„å°ç‹åŒå­¦ç”Ÿæ—¥å¿«ä¹</div>
  <div id="countdown">å€’è®¡æ—¶åŠ è½½ä¸­...</div>

  <!-- ä½¿ç”¨å›¾ç‰‡ URL æ˜¾ç¤ºå›¾ç‰‡ -->
  <img id="photo" src="https://i.imgur.com/6XBurO7.jpeg" alt="ç”Ÿæ—¥å¿«ä¹">
  
  <button id="triggerButton" onclick="triggerCelebration()">ğŸ‰ ç«‹å³è§¦å‘åº†å…¸</button>
  <div id="bigTitle">ğŸ‰ å°ç‹åŒå­¦ç”Ÿæ—¥å¿«ä¹ ğŸ‰</div>
  <div id="cake">ğŸ‚</div>

  <!-- ä¿¡å°æŒ‰é’® -->
  <div id="envelopeButton" onclick="openEnvelope()">ğŸ“©</div>
  <!-- ä¿¡å°å†…å®¹ -->
  <div id="envelopeContent">
    <p>ğŸ å°ç‹ç”Ÿæ—¥å¿«ä¹ï¼</p>
    <p>å¸Œæœ›åœ¨æ–°çš„ä¸€å²é‡Œå°ç‹èƒ½å¼€å¿ƒå¿«ä¹æ— å¿§æ— è™‘ï¼Œ<br/>åœŸåœŸè·Ÿå›¢å›¢èƒ½å¥åº·å¹³å®‰ã€‚</p>
    <button onclick="closeEnvelope()">å…³é—­</button>
  </div>

  <!-- åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ -->
  <canvas id="starsCanvas"></canvas>

  <script>
    // åˆ›å»ºåŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯
    const starsCanvas = document.getElementById("starsCanvas");
    const ctx = starsCanvas.getContext("2d");
    starsCanvas.width = window.innerWidth;
    starsCanvas.height = window.innerHeight;

    const stars = [];
    const numStars = 100; // æ˜Ÿæ˜Ÿæ•°é‡

    function createStars() {
      for (let i = 0; i < numStars; i++) {
        stars.push({
          x: Math.random() * starsCanvas.width,
          y: Math.random() * starsCanvas.height,
          radius: Math.random() * 1.5 + 0.5,
          speedX: Math.random() * 0.5 - 0.25,
          speedY: Math.random() * 0.5 - 0.25,
          alpha: Math.random() * 0.5 + 0.3
        });
      }
    }

    function updateStars() {
      ctx.clearRect(0, 0, starsCanvas.width, starsCanvas.height);
      
      for (let i = 0; i < stars.length; i++) {
        let star = stars[i];
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
        ctx.fill();
        
        // æ›´æ–°æ˜Ÿæ˜Ÿä½ç½®
        star.x += star.speedX;
        star.y += star.speedY;

        // é‡ç½®æ˜Ÿæ˜Ÿä½ç½®
        if (star.x < 0 || star.x > starsCanvas.width || star.y < 0 || star.y > starsCanvas.height) {
          star.x = Math.random() * starsCanvas.width;
          star.y = Math.random() * starsCanvas.height;
        }
      }

      requestAnimationFrame(updateStars);
    }

    createStars();
    updateStars();

    // Countdown logic
    function updateCountdown() {
      const now = new Date();
      const target = new Date(now.getFullYear(), 6, 22, 0, 0, 0);
      const diff = target - now;
      if (diff <= 0) {
        clearInterval(countdownInterval);
        triggerCelebration();  // å€’è®¡æ—¶ç»“æŸæ—¶è§¦å‘åº†å…¸
        return;
      }
      const days = Math.floor(diff / 86400000);
      const hours = Math.floor((diff % 86400000) / 3600000);
      const minutes = Math.floor((diff % 3600000) / 60000);
      const seconds = Math.floor((diff % 60000) / 1000);
      document.getElementById("countdown").textContent =
        `å€’è®¡æ—¶ï¼š${days}å¤© ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    const countdownInterval = setInterval(updateCountdown, 1000);
    updateCountdown();

    // Celebration trigger
    function triggerCelebration() {
      // éšè—å›¾ç‰‡
      document.getElementById("photo").style.display = "none";
      
      // æ˜¾ç¤ºåº†å…¸å†…å®¹
      document.getElementById("subtitle").classList.add("fadeOut");
      document.getElementById("countdown").classList.add("fadeOut");
      document.getElementById("triggerButton").classList.add("fadeOut");
      document.getElementById("bigTitle").style.display = "block";
      document.getElementById("cake").style.display = "block";

      // æ˜¾ç¤ºä¿¡å°æŒ‰é’®
      document.getElementById("envelopeButton").style.display = "block";
    }

    // æ‰“å¼€ä¿¡å°
    function openEnvelope() {
      document.getElementById("envelopeButton").style.display = "none"; // éšè—ä¿¡å°æŒ‰é’®
      document.getElementById("envelopeContent").style.display = "block"; // æ˜¾ç¤ºä¿¡å°å†…å®¹
    }

    // å…³é—­ä¿¡å°
    function closeEnvelope() {
      document.getElementById("envelopeContent").style.display = "none"; // éšè—ä¿¡å°å†…å®¹
    }
  </script>
</body>

</html>
